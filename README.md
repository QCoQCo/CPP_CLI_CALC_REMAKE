# C++ CLI Calculator

<p align="center">
  <strong>📖 문서 언어 / ドキュメント言語</strong><br>
  <a href="#한국어">한국어</a> · <a href="#日本語">日本語</a>
</p>

---

## 한국어

### 소개

**C++ CLI Calculator**는 터미널에서 바로 사용할 수 있는 대화형 계산기입니다.  
단순 사칙연산부터 괄호, 변수, 과학 함수까지 지원하며, C++17 단일 파일로 구현되어 있어 빌드와 수정이 쉽습니다.

### 주요 기능

| 구분                  | 내용                                                                                            |
| --------------------- | ----------------------------------------------------------------------------------------------- |
| **사칙연산**          | `+`, `-`, `*`, `/`, `^`(거듭제곱). 공백 없이 `5+3` 또는 `5 + 3` 모두 입력 가능                  |
| **괄호·복잡한 수식**  | `(1+2)*3`, `2^(1+1)` 등 연산자 우선순위 자동 적용 (`^` > `*` `/` > `+` `-`)                     |
| **변수 저장**         | `x=10`, `radius=3.14`처럼 변수에 값을 넣고, 이후 식에서 `x`, `radius` 사용 가능                 |
| **마지막 결과 (ans)** | 직전 계산 결과가 `ans`에 저장됨. `ans+1`, `ans*2`처럼 이어서 계산 가능                          |
| **계산 히스토리**     | `history` 명령으로 최근 계산 식과 결과 목록 확인 (최대 100개)                                   |
| **과학 함수**         | `sin`, `cos`, `tan`, `sqrt`, `log`, `ln`, `log10`, `exp`, `abs`, `pow(x,y)` (각도는 **라디안**) |
| **특수 명령**         | `history`(히스토리), `vars`(변수 목록), `quit` / `exit` / `q`(종료)                             |

### 요구 사항

- C++17을 지원하는 컴파일러 (GCC, Clang, MSVC 등)
- CMake 3.10 이상 (CMake로 빌드할 경우)

### 빌드 방법

#### 1) Makefile 사용 (권장)

```bash
make
./calculator
```

- `make clean`: 생성된 실행 파일 삭제

#### 2) CMake 사용

```bash
mkdir build
cd build
cmake ..
make
./bin/calculator
```

#### 3) 직접 컴파일

```bash
g++ -std=c++17 -Wall -Wextra -O2 -o calculator main.cpp
./calculator
```

### 사용 방법

프로그램을 실행하면 `>` 프롬프트가 나옵니다. 여기에 **수식** 또는 **명령**을 입력합니다.

- **수식**: 계산 결과가 출력되고, 그 값이 `ans`에 저장됩니다.
- **변수 대입**: `변수이름=수식` 형태로 입력하면 해당 변수에 값이 저장됩니다.
- **명령**: `history`, `vars`, `quit` 등은 계산이 아닌 동작을 수행합니다.

#### 입력 예시

```
> 5+3
Result: 8

> (1+2)*4
Result: 12

> x = 10
Result: 10

> x * 2 + ans
Result: 30

> sin(0)
Result: 0

> sqrt(16)
Result: 4

> history
  5+3 = 8
  (1+2)*4 = 12
  x = 10 = 10
  x * 2 + ans = 30
  ...

> vars
  ans = 30
  x = 10

> quit
Goodbye!
```

### 지원 함수 목록

| 함수                         | 설명             | 비고                  |
| ---------------------------- | ---------------- | --------------------- |
| `sin(x)`, `cos(x)`, `tan(x)` | 삼각함수         | 인자 단위: **라디안** |
| `sqrt(x)`                    | 제곱근           | x ≥ 0                 |
| `log(x)`, `ln(x)`            | 자연로그 (밑 e)  | x > 0                 |
| `log10(x)`                   | 상용로그 (밑 10) | x > 0                 |
| `exp(x)`                     | e^x              |                       |
| `abs(x)`                     | 절댓값           |                       |
| `pow(x,y)`                   | x^y              | 두 인자 필요          |

### 연산자 우선순위

1. `^` (거듭제곱) — 가장 먼저 계산
2. `*`, `/` (곱셈, 나눗셈)
3. `+`, `-` (덧셈, 뺄셈)
4. 괄호 `( )` 안의 식이 항상 가장 먼저 계산됨

예: `2+3*4` → 14, `(2+3)*4` → 20, `2^3^2` → 512 (오른쪽부터: 3^2=9, 2^9=512)

### 변수 이름 규칙

- 영문자 또는 `_`로 시작
- 이후 영문자, 숫자, `_`만 사용 가능  
  예: `x`, `_val`, `radius2` (O) / `2x`, `my-var` (X)

### 구현된 개선 사항(REMAKE)

- [x] 괄호 지원
- [x] 복잡한 수식 파싱 (연산자 우선순위 반영)
- [x] 변수 저장 기능
- [x] 계산 히스토리 (`history`, `ans`)
- [x] 과학 계산 함수 (sin, cos, log 등)

---

## 日本語

### 概要

**C++ CLI Calculator**は、ターミナルでそのまま使える対話型電卓です。  
四則演算から括弧・変数・科学関数まで対応し、C++17の単一ファイルで実装しているため、ビルドや改造が容易です。

### 主な機能

| 区分               | 内容                                                                                              |
| ------------------ | ------------------------------------------------------------------------------------------------- |
| **四則演算**       | `+`, `-`, `*`, `/`, `^`(累乗)。スペースなしの`5+3`や`5 + 3`のどちらも入力可能                     |
| **括弧・複雑な式** | `(1+2)*3`, `2^(1+1)` など、演算子の優先順位を自動適用（`^` > `*` `/` > `+` `-`）                  |
| **変数保存**       | `x=10`, `radius=3.14` のように変数に値を入れ、以降の式で `x`, `radius` を利用可能                 |
| **直前結果 (ans)** | 直前に計算した結果が `ans` に保存される。`ans+1`, `ans*2` のように続けて計算可能                  |
| **計算履歴**       | `history` コマンドで直近の計算式と結果の一覧を表示（最大100件）                                   |
| **科学関数**       | `sin`, `cos`, `tan`, `sqrt`, `log`, `ln`, `log10`, `exp`, `abs`, `pow(x,y)`（角度は**ラジアン**） |
| **特殊コマンド**   | `history`(履歴), `vars`(変数一覧), `quit` / `exit` / `q`(終了)                                    |

### 必要環境

- C++17対応のコンパイラ（GCC, Clang, MSVC など）
- CMake 3.10以上（CMakeでビルドする場合）

### ビルド方法

#### 1) Makefile を使う場合（推奨）

```bash
make
./calculator
```

- `make clean`: 生成された実行ファイルを削除

#### 2) CMake を使う場合

```bash
mkdir build
cd build
cmake ..
make
./bin/calculator
```

#### 3) 直接コンパイル

```bash
g++ -std=c++17 -Wall -Wextra -O2 -o calculator main.cpp
./calculator
```

### 使い方

プログラムを起動すると `>` プロンプトが表示されます。ここに**数式**または**コマンド**を入力します。

- **数式**: 計算結果が表示され、その値が `ans` に保存されます。
- **変数代入**: `変数名=数式` の形で入力すると、その変数に値が保存されます。
- **コマンド**: `history`, `vars`, `quit` などは計算ではなく、それぞれの動作を実行します。

#### 入力例

```
> 5+3
Result: 8

> (1+2)*4
Result: 12

> x = 10
Result: 10

> x * 2 + ans
Result: 30

> sin(0)
Result: 0

> sqrt(16)
Result: 4

> history
  5+3 = 8
  (1+2)*4 = 12
  x = 10 = 10
  x * 2 + ans = 30
  ...

> vars
  ans = 30
  x = 10

> quit
Goodbye!
```

### 対応関数一覧

| 関数                         | 説明              | 備考               |
| ---------------------------- | ----------------- | ------------------ |
| `sin(x)`, `cos(x)`, `tan(x)` | 三角関数          | 引数は**ラジアン** |
| `sqrt(x)`                    | 平方根            | x ≥ 0              |
| `log(x)`, `ln(x)`            | 自然対数（底 e）  | x > 0              |
| `log10(x)`                   | 常用対数（底 10） | x > 0              |
| `exp(x)`                     | e^x               |                    |
| `abs(x)`                     | 絶対値            |                    |
| `pow(x,y)`                   | x^y               | 2つの引数が必要    |

### 演算子の優先順位

1. `^`（累乗）— 最初に計算
2. `*`, `/`（乗算・除算）
3. `+`, `-`（加算・減算）
4. 括弧 `( )` 内の式が常に最優先で計算

例: `2+3*4` → 14, `(2+3)*4` → 20, `2^3^2` → 512（右から: 3^2=9, 2^9=512）

### 変数名の規則

- 英字または `_` で始める
- 以降は英字・数字・`_` のみ使用可能  
  例: `x`, `_val`, `radius2`（可）/ `2x`, `my-var`（不可）

### 実装済みの改善項目(REMAKE)

- [x] 括弧のサポート
- [x] 複雑な式のパース（演算子優先順位の反映）
- [x] 変数保存機能
- [x] 計算履歴（`history`, `ans`）
- [x] 科学計算関数（sin, cos, log など）

---

<p align="center">
  <a href="#c-cli-calculator">↑ ページ先頭 / ページトップ</a>
</p>
